<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Modal Verbs ‚Äî Keynote Grammar</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
<style>
  /* RESET & ROOT */
  *{box-sizing:border-box;margin:0;padding:0;font-family:'Poppins',sans-serif}
  :root{
    --header-h:64px;
    --footer-h:56px;
    --bg1:#001f3f; --bg2:#003c8f; --bg3:#004d99;
    --soft-white-1: rgba(255,255,255,0.40);
    --soft-white-2: rgba(255,255,255,0.20);
    --accent-gold:#ffd24d;
  }

  /* PAGE FLOW / SCROLL SAFETY */
  html,body{height:100%;width:100%}
  body{
    min-height:100%;
    background: linear-gradient(135deg,var(--bg1),var(--bg2),var(--bg3));
    color:#fff;
    padding-top: calc(var(--header-h) + 18px);
    /* ensure bottom content sits well above fixed footer */
    padding-bottom: calc(var(--footer-h) + 160px);
    display:block; /* natural flow so scrolling works consistently */
    overflow-x:hidden;
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
  }

  /* Floating dots background */
  .bg-anim{position:fixed;inset:0;z-index:-2;pointer-events:none}
  .dot{position:absolute;border-radius:50%;background:rgba(255,255,255,0.07);filter:blur(24px);opacity:.6;animation:drift 12s infinite ease-in-out}
  @keyframes drift{0%{transform:translateY(0)}50%{transform:translateY(-40px)}100%{transform:translateY(0)}}

  /* Header & footer (fixed) */
  header{
    position:fixed;inset:0 0 auto 0;height:var(--header-h);
    display:flex;align-items:center;justify-content:space-between;padding:12px 20px;
    background:rgba(0,0,0,0.35);backdrop-filter:blur(8px);
    border-bottom:1px solid rgba(255,255,255,0.08);z-index:1200;
  }
  header h1{font-size:1.05rem;font-weight:600;color:#fff}
  header nav{display:flex;gap:12px}
  header nav a{color:#fff;text-decoration:none;font-weight:600;padding:6px 8px;border-radius:6px;transition:color .18s}
  header nav a:hover{color:var(--accent-gold)}

  footer{
    position:fixed;inset:auto 0 0 0;height:var(--footer-h);
    display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,0.32);
    backdrop-filter:blur(8px);border-top:1px solid rgba(255,255,255,0.06);
    color:#fff;font-size:0.9rem;z-index:1200;padding:0 10px;
  }

  /* Container centered */
  .wrap{width:100%;max-width:1000px;margin:28px auto}
  .card{
    background:rgba(255,255,255,0.06);
    border:1px solid rgba(255,255,255,0.12);
    border-radius:16px;padding:26px;box-shadow:0 10px 30px rgba(0,0,0,0.45);
    overflow:visible;
  }

  h1{color:var(--accent-gold);text-align:center;margin-bottom:6px}
  p.lead{color:#e0e6ef;text-align:center;margin-bottom:12px}

  /* AUDIO BOX: small box under title (snake-target) */
  .audio-box{
    max-width:760px;margin:14px auto 18px;padding:12px;border-radius:12px;
    background:rgba(255,255,255,0.04);border:1px solid rgba(255,255,255,0.06);
    position:relative;overflow:visible;transition:transform .18s;
  }
  .audio-title{color:var(--accent-gold);font-weight:700;margin-bottom:8px}
  .lang-select{display:flex;gap:10px;margin-bottom:8px}
  .lang-btn{flex:1;padding:8px;border-radius:8px;background:rgba(255,255,255,0.06);border:none;color:#fff;font-weight:700;cursor:pointer}
  .lang-btn.active{background:var(--accent-gold);color:#000}

  /* modal cards grid */
  .modal-grid{
    display:grid;
    grid-template-columns:repeat(auto-fit,minmax(240px,1fr));
    gap:20px;
    margin-top:18px;
  }

  .card{
  background:rgba(255,255,255,0.06);
  border:1px solid rgba(255,255,255,0.12);
  border-radius:16px;
  padding:26px;
  padding-bottom:120px; /* FIX */
  box-shadow:0 10px 30px rgba(0,0,0,0.45);
  overflow:visible;
}
.modal-card h2{color:var(--accent-gold);margin-bottom:8px;font-size:1.05rem}
  .modal-card ul{margin-left:12px;line-height:1.6}
  .modal-card li{color:#eef5ff;margin-bottom:6px}

  /* Soft white glow and snake for small boxes (only these should glow) */
  .snake-target{transition:all .20s ease;position:relative;overflow:visible;border-radius:inherit}
  .snake-target:hover{
    background:#fff !important;
    color:#000 !important;
    transform:translateY(-4px) scale(1.01);
    border-color:#000 !important;
    box-shadow:
      0 0 18px var(--soft-white-1),
      0 0 38px var(--soft-white-2);
  }
  .snake-target:hover *{color:#000 !important}

  /* Injected snake outline */
  .snake-svg{position:absolute;top:-8px;left:-8px;width:calc(100% + 16px);height:calc(100% + 16px);pointer-events:none;opacity:0;transition:opacity .22s ease}
  .snake-svg polyline{fill:none;stroke:#fff;stroke-width:3;stroke-dasharray:90 650;stroke-dashoffset:90;transition:stroke-dashoffset .85s ease}
  .snake-target:hover .snake-svg{opacity:1}
  .snake-target:hover .snake-svg polyline{stroke-dashoffset:-650}

  /* Table styles (table-wrappers are snake-target boxes) */
  .table-wrap{margin-top:14px;overflow:visible;position:relative}
  table{width:100%;border-collapse:collapse;background:rgba(255,255,255,0.03);border-radius:8px}
  th,td{padding:10px 12px;border-bottom:1px solid rgba(255,255,255,0.06);text-align:left;color:#eaf3ff}
  th{color:var(--accent-gold);background:rgba(255,255,255,0.02);font-weight:700}
  tbody tr{transition:all .18s}
  tbody tr:hover{background:#fff !important;color:#000 !important;box-shadow:0 0 18px var(--soft-white-1)}
  tbody tr:hover td{color:#000 !important;font-weight:700}

  /* Buttons: make them snake-targets so they get the same soft white glow */
  .actions{display:flex;gap:12px;justify-content:center;margin-top:22px;flex-wrap:wrap}
  .btn{padding:10px 18px;border-radius:999px;background:rgba(255,255,255,0.12);color:#fff;text-decoration:none;font-weight:600;transition:all .18s}
  .btn:hover{background:#fff;color:#000;box-shadow:0 0 22px rgba(255,255,255,0.95);transform:scale(1.03)}
  .btn.primary{background:var(--accent-gold);color:#001f3f}
  .btn.primary:hover{background:#fff;color:#000}

  /* keep the main card itself from glowing */
  .card:hover{transform:none;box-shadow:0 10px 30px rgba(0,0,0,0.45)}

  /* responsive */
  @media (max-width:820px){
    .wrap{margin:18px 12px 28px}
    .modal-grid{grid-template-columns:repeat(1,1fr)}
  }
</style>
</head>
<body>
  <!-- floating dots -->
  <div class="bg-anim" aria-hidden="true">
    <div class="dot" style="width:120px;height:120px;left:6%;top:72%;animation-delay:0s"></div>
    <div class="dot" style="width:180px;height:180px;left:64%;top:10%;animation-delay:2s"></div>
    <div class="dot" style="width:90px;height:90px;left:42%;top:44%;animation-delay:4s"></div>
  </div>

  <!-- hover sound file ‚Äî replace if you have another -->
  <audio id="hoverSound" src="buttonhovering.mp3" preload="auto"></audio>

  <header>
    <h1>Grammar With Joy</h1>
    <nav>
      <a href="index.html">Home</a>
            <a href="quiz.html">Quizzes</a>
    </nav>
  </header>

  <div class="wrap">
    <main class="card" role="main" aria-labelledby="pageTitle">
      <h1 id="pageTitle">Modal Verbs</h1>
      <p class="lead">Modal verbs show ability, permission, possibility and obligation. Hover the cards, tables or buttons to hear the hover sound and see the white glow.</p>

      <!-- AUDIO BOX (small box) -->
      <div class="audio-box snake-target" data-en="modal_english.mp3" data-ta="modal_tamil.mp3" aria-label="Audio explanation (English/Tamil)"></div>

      <!-- modal cards grid ‚Äî each card is a snake-target (small unified box that glows) -->
      <div class="modal-grid">
        <article class="modal-card snake-target" tabindex="0" aria-labelledby="m-can">
          <h2 id="m-can">1. CAN</h2>
          <ul>
            <li><strong>Ability:</strong> I can swim.</li>
            <li><strong>Inability:</strong> I can‚Äôt swim.</li>
            <li><strong>Request:</strong> Can you help me?</li>
            <li><strong>Permission:</strong> Can I drink some water?</li>
          </ul>
        </article>

        <article class="modal-card snake-target" tabindex="0" aria-labelledby="m-could">
          <h2 id="m-could">2. COULD</h2>
          <ul>
            <li><strong>Past ability:</strong> She could walk before the accident.</li>
            <li><strong>Polite request:</strong> Could you open the window?</li>
          </ul>
        </article>

        <article class="modal-card snake-target" tabindex="0" aria-labelledby="m-may">
          <h2 id="m-may">3. MAY</h2>
          <ul>
            <li><strong>Permission:</strong> May I come in?</li>
            <li><strong>Possibility:</strong> It may rain today.</li>
          </ul>
        </article>

        <article class="modal-card snake-target" tabindex="0" aria-labelledby="m-might">
          <h2 id="m-might">4. MIGHT</h2>
          <ul><li><strong>Weak possibility:</strong> He might come to the meeting.</li></ul>
        </article>

        <article class="modal-card snake-target" tabindex="0" aria-labelledby="m-must">
          <h2 id="m-must">5. MUST</h2>
          <ul>
            <li><strong>Strong necessity:</strong> You must wear a helmet.</li>
            <li><strong>Prohibition:</strong> You must not smoke here.</li>
          </ul>
        </article>

        <article class="modal-card snake-target" tabindex="0" aria-labelledby="m-have">
          <h2 id="m-have">6. HAVE TO / HAS TO</h2>
          <ul>
            <li>I have to wake up early.</li>
            <li>She has to wear a uniform.</li>
          </ul>
        </article>

        <article class="modal-card snake-target" tabindex="0" aria-labelledby="m-should">
          <h2 id="m-should">7. SHOULD</h2>
          <ul>
            <li>You should study more.</li>
            <li>You shouldn‚Äôt eat too much sugar.</li>
          </ul>
        </article>
      </div>

      <!-- summary table inside a snake-target small box -->
      <div class="table-wrap snake-target" aria-hidden="false" style="margin-top:22px">
        <table>
          <thead>
            <tr><th>Modal Verb</th><th>Meaning</th><th>Example</th></tr>
          </thead>
          <tbody>
            <tr><td>can</td><td>ability / permission</td><td>She can swim.</td></tr>
            <tr><td>could</td><td>past ability / polite request</td><td>Could you help me?</td></tr>
            <tr><td>may</td><td>permission / possibility</td><td>You may go now.</td></tr>
            <tr><td>might</td><td>weak possibility</td><td>It might rain.</td></tr>
            <tr><td>must</td><td>strong obligation</td><td>You must wear a mask.</td></tr>
            <tr><td>have to</td><td>external requirement</td><td>He has to finish homework.</td></tr>
            <tr><td>should</td><td>advice</td><td>You should sleep early.</td></tr>
          </tbody>
        </table>
      </div>

      <!-- buttons (snake-target so they get the same glow & sound) -->
      <div class="actions" role="navigation" aria-label="Page actions" style="margin-top:28px">
        <a class="btn primary snake-target" href="lesson17_video.html">üé¨ Watch Video</a>
        <a class="btn snake-target" href="png17.html">üß© Next</a>
        <a class="btn snake-target" href="topics.html">üè† Back to Topics</a>
      </div>

    </main>
  </div>

  <footer>¬© 2025 Keynote Grammar ‚Äî Grammar With Joy</footer>

  <!-- JS: audio builder, snake injection, hover sound, accessibility -->
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const hoverSound = document.getElementById('hoverSound');
      function playHover() {
        if (!hoverSound) return;
        try { hoverSound.currentTime = 0; hoverSound.play().catch(()=>{}); } catch(e) {}
      }

      /* Build audio UI inside .audio-box elements */
      document.querySelectorAll('.audio-box').forEach(box => {
        const en = box.dataset.en || 'modal_english.mp3';
        const ta = box.dataset.ta || 'modal_tamil.mp3';

        box.innerHTML = `
          <div class="audio-title">Audio explanation</div>
          <div class="lang-select" role="tablist" aria-label="Audio language selector">
            <button class="lang-btn active" data-lang="en" role="tab" aria-selected="true">English</button>
            <button class="lang-btn" data-lang="ta" role="tab" aria-selected="false">Tamil</button>
          </div>
          <audio class="audioPlayer" controls preload="none" aria-label="Lesson audio">
            <source src="${en}" type="audio/mpeg">
            Your browser does not support the audio element.
          </audio>
        `;

        const audio = box.querySelector('.audioPlayer');
        const src = audio.querySelector('source');
        box.querySelectorAll('.lang-btn').forEach(btn => {
          btn.addEventListener('click', () => {
            box.querySelectorAll('.lang-btn').forEach(b => { b.classList.remove('active'); b.setAttribute('aria-selected','false'); });
            btn.classList.add('active'); btn.setAttribute('aria-selected','true');
            src.src = btn.dataset.lang === 'en' ? en : ta;
            audio.load();
            audio.play().catch(()=>{ /* autoplay blocked */ });
          });
        });
      });

      /* Inject snake SVG into each snake-target small box */
      function injectSnake(target){
        if(!target || target.querySelector('.snake-svg')) return;
        const svg = document.createElementNS('http://www.w3.org/2000/svg','svg');
        svg.classList.add('snake-svg');
        svg.setAttribute('viewBox','0 0 260 60');
        svg.setAttribute('preserveAspectRatio','none');
        svg.innerHTML = '<polyline points="0,0 260,0 260,60 0,60 0,0"></polyline>';
        if(getComputedStyle(target).position === 'static') target.style.position = 'relative';
        target.insertBefore(svg, target.firstChild);
      }

      const targets = document.querySelectorAll('.snake-target');
      targets.forEach(t => {
        injectSnake(t);
        // pointerenter triggers sound
        t.addEventListener('pointerenter', playHover);
        // keyboard focus triggers sound + visual
        t.addEventListener('focus', playHover, {passive:true});
        // make focusable for keyboard if not natively focusable
        if (!t.hasAttribute('tabindex')) t.setAttribute('tabindex','0');
      });

      // header nav hover sound
      document.querySelectorAll('header nav a').forEach(a => a.addEventListener('pointerenter', playHover));

      // small accessibility: stop accidental horizontal overflow on mobile
      setTimeout(()=>{ document.documentElement.style.width = '100%'; }, 50);
    });
  </script>
</body>
</html>
